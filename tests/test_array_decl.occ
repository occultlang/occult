include "../lib/stdio.occ"

fn range(i64 from, i64 to) i64 {
    i64 len = (to - from) * 8;
    i64 new = alloc(len); 
    
    for i64 i = from when i < to do i = i + 1 {
        i64 tmp = new + ((i - from) * 8);
        $tmp = i;
    }
    
    return new;
}

fn main() {
    array[16] i64 arr_test = {1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4};
    i64 sum = 0;
    
    for i64 i = 0 when i < 16 do i = i + 1 {
        sum = sum + arr_test[i];
    }
    
    print_string("Sum for array is: ");
    print_integer(sum);
    print_string("\n");
    
    i64 ranged = range(0, sum);
    
    for i64 i = 0 when i < sum do i = i + 1 {
        i64 tmp = ranged + (i * 8);
        print_integer($tmp);
        print_string("\n");
    }
    
    del(ranged);
}